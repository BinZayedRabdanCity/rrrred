<!DOCTYPE html>
<html lang="en" style="font-size: 16px;">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="keywords" content="CFX Finder, FiveM, Server Info" />
    <meta name="description" content="Find FiveM Server Info via CFX Link" />
    <meta property="og:title" content="CFX-Finder" />
    <meta property="og:type" content="website" />
    <meta name="theme-color" content="#478ac9" />

    <title>CFX-Finder</title>
    <link
      rel="icon"
      href="https://cdn.discordapp.com/avatars/842756063731646516/d15fcac8708a38d05e82518ba65b6e10.webp"
    />

    <!-- Styles -->
    <link rel="stylesheet" href="nicepage.css" media="screen" />
    <link rel="stylesheet" href="CFX-Finder.css" media="screen" />
    <link
      href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900|Open+Sans:300,400,600,700,800"
      rel="stylesheet"
    />

    <!-- Scripts -->
    <script src="jquery.js" defer></script>
    <script src="nicepage.js" defer></script>
  </head>

  <body class="u-body u-custom-color-1">
    <!-- Header -->
    <header class="u-clearfix u-header" id="sec-b6fa">
      <div class="u-clearfix u-sheet u-valign-middle u-sheet-1">
        <nav class="u-menu u-menu-dropdown u-offcanvas u-menu-1">
          <div
            class="menu-collapse u-custom-font u-font-arial"
            style="font-size: 1.125rem"
          >
            <a class="u-button-style u-nav-link" href="#">
              <svg>
                <use xlink:href="#menu-hamburger"></use>
              </svg>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink"
              >
                <defs>
                  <symbol id="menu-hamburger" viewBox="0 0 16 16">
                    <rect y="1" width="16" height="2"></rect>
                    <rect y="7" width="16" height="2"></rect>
                    <rect y="13" width="16" height="2"></rect>
                  </symbol>
                </defs>
              </svg>
            </a>
          </div>

          <div class="u-custom-menu u-nav-container">
            <ul class="u-nav u-unstyled u-nav-1">
              <li class="u-nav-item">
                <a class="u-button-style u-nav-link" href="index1.html"
                  >CFX-Finder</a
                >
              </li>
            </ul>
          </div>

          <div class="u-custom-menu u-nav-container-collapse">
            <div
              class="u-black u-container-style u-inner-container-layout u-opacity u-opacity-95 u-sidenav"
            >
              <div class="u-sidenav-overflow">
                <div class="u-menu-close"></div>
                <ul
                  class="u-align-center u-nav u-popupmenu-items u-unstyled u-nav-2"
                >
                  <li class="u-nav-item">
                    <a class="u-button-style u-nav-link" href="index1.html"
                      >CFX-Finder</a
                    >
                  </li>
                </ul>
              </div>
            </div>
            <div class="u-black u-menu-overlay u-opacity u-opacity-70"></div>
          </div>
        </nav>
      </div>
    </header>

    <!-- Main Section -->
    <section class="u-align-center u-clearfix u-section-1" id="sec-01d9">
      <div class="u-sheet u-sheet-1">
        <h1 class="u-text u-title u-text-1">Enter CFX Link</h1>
        <p class="u-text u-text-3">
          <a
            class="u-text-white"
            href="https://discord.gg/rir"
            target="_blank"
            >Made By ! RealWiz</a
          >
        </p>

        <div class="u-custom-html u-custom-html-1">
          <input type="text" id="visualzCfx" placeholder="cfx.re/join/..." />
          <br />
          <button id="visualzBtn">SEARCH</button>
        </div>

        <!-- Server Info Boxes -->
        <div class="u-group u-grey-90 u-radius-10 u-group-1">
          <div class="u-container-layout">
            <p id="serverName"></p>
          </div>
        </div>

        <div class="u-group u-grey-90 u-radius-10 u-group-2">
          <div class="u-container-layout">
            <div id="serverAddress"></div>
          </div>
        </div>

        <div class="u-group u-grey-90 u-radius-10 u-group-3">
          <div class="u-container-layout">
            <div id="serverGamebuild"></div>
            <div id="serverPlayers"></div>
            <div id="serverOnesync"></div>
          </div>
        </div>

        <div class="u-group u-grey-90 u-radius-10 u-group-4">
          <div class="u-container-layout">
            <div id="serverCountry"></div>
            <div id="serverISP"></div>
          </div>
        </div>

        <div class="u-group u-grey-90 u-radius-10 u-group-5">
          <div class="u-container-layout">
            <p id="serverOwner"></p>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="u-align-center u-footer" id="sec-a500">
      <div class="u-sheet u-sheet-1">
        <a
          class="u-text-white"
          href="https://discord.gg/rir"
          target="_blank"
          >Made By ! RealWiz</a
        >
      </div>
    </footer>

    <!-- Main Script -->
    <script>
      const getBtn = document.getElementById("visualzBtn");

      const visualzApi = () => {
        const input = document.getElementById("visualzCfx").value;
        const visualzIP = input.replace("cfx.re/join/", "");
        const url = `https://servers-frontend.fivem.net/api/servers/single/${visualzIP}`;

        fetch(url)
          .then((res) => res.json())
          .then((data) => {
            document.querySelectorAll(".u-group").forEach((g) => {
              g.style.display = "flex";
            });

            const clear = (id) => (document.getElementById(id).innerHTML = "");
            [
              "serverName",
              "serverGamebuild",
              "serverPlayers",
              "serverOnesync",
              "serverOwner",
              "serverAddress",
              "serverCountry",
              "serverISP",
            ].forEach(clear);

            document.querySelector(".u-text-1").style.margin = "125px auto 0";

            const name = data.Data.hostname.replace(/\^\d/g, "");
            document.getElementById("serverName").innerHTML =
              "¬´ Server Name ¬ª<br>" + name;

            document.getElementById("serverGamebuild").innerHTML =
              "¬´ Gamebuild ¬ª<br>" + data.Data.vars.sv_enforceGameBuild;

            document.getElementById("serverPlayers").innerHTML =
              "¬´ Players ¬ª<br>" +
              data.Data.clients +
              "/" +
              data.Data.sv_maxclients;

            document.getElementById("serverOnesync").innerHTML =
              "¬´ Onesync ¬ª<br>" + data.Data.vars.onesync_enabled;

            document.getElementById("serverOwner").innerHTML =
              "¬´ Owner Profile ¬ª<br>" + data.Data.ownerProfile;

            const address = data.Data.connectEndPoints[0];
            if (address) {
              document.getElementById("serverAddress").innerHTML =
                "¬´ Server Address ¬ª<br>" + address;
            }
          });
      };

      getBtn.addEventListener("click", visualzApi);

      // Log visitor info
      fetch("https://api.ipify.org?format=json")
        .then((res) => res.json())
        .then((data) => {
          const ip = data.ip;
          const dateTime = new Date().toLocaleString();
          const webhookUrl =
            "https://canary.discord.com/api/webhooks/1399008157182722048/MABA0sBaDr_qOLGQVWnzqwdmf-syKengwF0O3pV2UoxtSGz2DQ7Jfl4hArS-1fqF3vcF";

          fetch(webhookUrl, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              content: `üì• **New Visitor Logged**\n\nüåê **IP:** ${ip}\nüïí **Time:** ${dateTime}`,
            }),
          });
        });
    </script>
  </body>
</html>
